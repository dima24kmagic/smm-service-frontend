{"version":3,"sources":["app/components/CleanPage/PanelControl/HeaderControl.js","app/components/CleanPage/PanelControl/PanelControl.js","app/components/CleanPage/PublicGroup/PublicInfo.js","app/components/CleanPage/PublicGroup/ProgressBar.js","app/components/CleanPage/PublicGroup/PublicAvatar.js","services/services.api.js","app/components/CleanPage/InputModal.js","store/reducers/reducer.clean.js","store/reducers/reducer.survey.js","store/reducers/reducer.root.js","store/index.js","app/components/CleanPage/PublicGroup/Public.js","app/components/CleanPage/PublicGroup/AddPublicButton.js","app/components/CleanPage/VideoGuide.js","app/components/CleanPage/PublicGroup/GroupsModal/Group.js","app/components/CleanPage/PublicGroup/GroupsModal/GroupsModal.js","app/components/CleanPage/CleanPage.js","app/components/TopBar.js","app/components/AddMoneyPage/AddMoneyPage.js","app/components/FeedbackPage/FeedbackPage.js","app/components/SurveyPage/SurveyAddForm/SurveyAddForm.js","app/components/SurveyPage/SurveyPage.js","app/App.js","serviceWorker.js","index.js"],"names":["HeaderControl","_this$props","this","props","text","children","onClick","style","react_default","a","createElement","className","Component","PanelControl","_this","PanelControl_HeaderControl","visibility","fa","onCleanClick","PublicInfo","_Component","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","Fragment","peopleCount","onStartClean","xmlns","width","height","viewBox","fill","stroke","stroke-width","stroke-linecap","stroke-linejoin","d","cx","cy","r","x1","y1","x2","y2","deletedPeople","ProgressBar","status","concat","progress","React","PublicAvatar","src","url","alt","VK","window","undefined","init","API_URL","API","getUserGroups","getGroupsPromise","getGroupsForClean","axios","get","params","user_vk_id","user_id","auth_key","getGroupDogsCount","groupID","id","deleteGroupFromCleanQue","backEndID","delete","addGroupToCleanAndGetItData","publicID","post","vk_id","startCleanTask","public_ids","getCleaningTasks","getFreshPublic","public_id","setAccessToken","token","patch","access_token","getPollById","_ref","ownerID","pollID","getAnswersByAnswerID","_ref2","_ref7","rightAnswerID","Promise","resolve","reject","api","v","poll_id","answer_ids","data","error","getAnswersByAnswerIdPromise","getAccessToUserWall","callMethod","onSettingChange","onSettingChangePromise","getUserByIDs","_ref3","userIDs","getUserByIDPromise","then","_ref4","response","withdrawBalance","amount","parseFloat","_ref5","user_ids","fields","_ref6","addCallback","settings","filter","extended","groups","normalizeVKGroupsData","items","array","map","converter","item","avatar_url","photo_100","name","InputModal","call","state","setState","swal","setActionValue","_this2","target","rel","href","type","placeholder","onChange","e","changeText","GET_USER_GROUPS","Load","Loaded","Errors","ADD_GROUP_IN_CLEAN_QUE","GET_GROUPS_FOR_CLEAN","initialState","loadingUserGroups","loadingCleanTasks","errors","cleanAllGroups","cb","allGroups","dispatch","groupsIDs","g","res","isAnyError","getAccessTokenFromUser","showNotEnoughMoneyModal","myInterval","setInterval","cleanTasks","payload","length","showCommentAlert","clearInterval","AddGroupInCleanQue","groupData","dogsCount","dogs_count","cleanGroupByID","DeleteGroupFromCleanQue","GetGroupsForCleanAndUserGroups","startLoading","groupsForClean","loadingProperty","title","icon","button","wrapper","document","ReactDOM","render","InputModal_InputModal","el","firstChild","content","buttons","confirm","link","slice","indexOf","money","delay","require","surveys","s1","s_url","s_right_answer","winners","loadingWinners","getRightAnswerID","poll","answers","getUsersThatResponseRight","users","GetPollById","s_key","parseInt","catch","err","onUrlChange","onAnswerChange","addSurveyForm","getPollOwnerID","split","GetWinners","balance","updateBalance","asyncToGenerator","regenerator_default","mark","_callee3","wrap","_context4","prev","next","showNotEnoughMoney","_ref8","_callee2","_context3","console","log","delegateYield","_callee","s_keys","_loop","i","_context2","keys","surveyData","_context","rightUsers","join","usersInfo","stop","_x2","_x","combineReducers","clean","action","objectSpread","forEach","group","inCleanQue","isLoadingInfo","cleanData","isCleaning","settedGroups","settedGroup","cleanTask","userGroups","groupsSetted","userGroup","dogs","followers","toggledGroups","_action$payload","groupWithData","_action$payload2","groupWithDogs","withCleanTask","allGroupsWithClean","defineProperty","surveyID","newState","oldArray","newArray","newArr","newItem","oldItem","toConsumableArray","filterWinners","history","createBrowserHistory","middleware","thunk","devToolsExtension","enhancers","push","composedEnhancers","compose","applyMiddleware","store","createStore","rootReducer","Public","PublicAvatar_PublicAvatar","ProgressBar_ProgressBar","PublicInfo_PublicInfo","connect","bindActionCreators","AddPublicButton","VideoGuide","frameBorder","allowFullScreen","Group","GroupsModal","querySelector","scrollHeight","close","GroupsModal_Group","CLEAN_TASK_ERRORS","CleanPage","publics","redirect","isAddGroupOpen","renderGroups","CleanPage_PublicGroup_Public","assign","toggleModal","setCleaningStateOnGroupByID","startCleanTasks","accessToken","timerId","updateCleanTasks","getPublicIds","setCleaningStateOnPublics","setGroups","_this3","includes","getAccessTokenFromLink","getCleanTasks","publik","refreshPublicById","addCleanTaskToGroups","publicId","freshPublic","onClean","_callee10","_context10","_this4","startCleanPublicById","freshPublicIndex","findIndex","find","CleanPage_PanelControl_PanelControl","AddPublicButton_AddPublicButton","PublicGroup_GroupsModal_GroupsModal","Redirect","to","TopBar","NavLink","AddMoneyPage","method","htmlFor","autoComplete","FeedbackPage","Widgets","Comments","limit","attach","SurveyAddForm","SurveyPage","SurveyPage_SurveyAddForm_SurveyAddForm","winner","screen_name","first_name","last_name","getQueryParam","param","query","location","search","substring","urlParams","vars","pair","Error","Sentry","dsn","process","REACT_APP_SENTRY_DSN","App","setBalance","newBalance","getUserBalance","abrupt","sent","t0","t1","errorInfo","scope","setExtra","Router","basename","react","components_TopBar","Switch","Route","exact","path","components_CleanPage_CleanPage","bind","component","components_SurveyPage_SurveyPage","components_AddMoneyPage_AddMoneyPage","Boolean","hostname","match","es","app_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.cdfc84f8.chunk.js","sourcesContent":["import React, {Component} from 'react'\n\nclass HeaderControl extends Component {\n    render() {\n        const {text, children, onClick, style} = this.props\n        return (\n            <div\n                className=\"header-control\"\n                onClick={() => onClick()}\n                style={style}\n            >\n                <div className=\"header-control__icon\">{children}</div>\n                <span>{text}</span>\n            </div>\n        )\n    }\n}\n\nexport default HeaderControl\n","import React, {Component} from 'react'\nimport HeaderControl from './HeaderControl'\nimport {FaSync, FaTrashAlt, FaBroom} from 'react-icons/fa'\nclass PanelControl extends Component {\n    render() {\n        return (\n            <div className=\"panel-control\">\n                <HeaderControl text=\"Обновить\" style={{visibility: 'hidden'}}>\n                    <FaSync />\n                </HeaderControl>\n                <HeaderControl\n                    text=\"Очистить все\"\n                    onClick={() => this.props.onCleanClick()}\n                >\n                    <FaBroom />\n                </HeaderControl>\n                <HeaderControl text=\"Удалить\" style={{visibility: 'hidden'}}>\n                    <FaTrashAlt />\n                </HeaderControl>\n            </div>\n        )\n    }\n}\n\nexport default PanelControl\n","import React, {Component} from 'react'\nimport {FaBroom, FaUsers} from 'react-icons/fa'\nimport * as PropTypes from 'prop-types'\nimport HeaderControl from '../PanelControl/HeaderControl'\n\nexport class PublicInfo extends Component {\n    render() {\n        return <>\n            <div className=\"public__info__container public__info--all\">\n                <FaUsers/>\n                {this.props.peopleCount}\n            </div>\n            <div className=\"public__info__container\">\n                <HeaderControl\n                    text=\"Очистить\"\n                    onClick={() => this.props.onStartClean()}\n                >\n                    <FaBroom />\n                </HeaderControl>\n            </div>\n            <div className=\"public__info__container public__info--deleted\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"\n                     stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n                     className=\"feather feather-user-x\">\n                    <path d=\"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"></path>\n                    <circle cx=\"8.5\" cy=\"7\" r=\"4\"></circle>\n                    <line x1=\"18\" y1=\"8\" x2=\"23\" y2=\"13\"></line>\n                    <line x1=\"23\" y1=\"8\" x2=\"18\" y2=\"13\"></line>\n                </svg>\n                {this.props.deletedPeople}\n            </div>\n        </>\n    }\n}\n\nPublicInfo.propTypes = {\n    peopleCount: PropTypes.any,\n    deletedPeople: PropTypes.any\n}","import React from 'react'\nimport './ProgressBar.css'\n\nclass ProgressBar extends React.Component {\n    render() {\n        return (\n            <div className=\"progress-position\">\n                <span className={'progress-status'}>{this.props.status}</span>\n                <div className=\"progress\">\n                    <div\n                        className=\"progress-bar main-progress-bar\"\n                        style={{width: `${this.props.progress}%`}}\n                    >\n                        <span className=\"percent\">{this.props.progress}%</span>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport {ProgressBar}\n","import React, {Component} from 'react'\n\nexport class PublicAvatar extends Component {\n    render() {\n        return <img\n            className=\"public__heading__img\"\n            src={this.props.url}\n            alt=\"pub img\"\n        />\n    }\n}","import axios from 'axios'\n\nlet VK = window.VK\nif (VK === undefined) {\n    VK = {\n        init: () => {}\n    }\n}\n\nconst API_URL = 'https://hot-dog.site/api'\nexport const API = {\n    getUserGroups: () => getGroupsPromise,\n    getGroupsForClean: () =>\n        axios.get(API_URL + '/getPublics', {\n            params: {\n                user_vk_id: window.user_id,\n                auth_key: window.auth_key\n            }\n        }),\n    getGroupDogsCount: (groupID) =>\n        axios.get(API_URL + '/getDogsCount', {\n            params: {\n                id: groupID,\n                user_vk_id: window.user_id,\n                auth_key: window.auth_key\n            }\n        }),\n    deleteGroupFromCleanQue: (backEndID) => {\n        // console.log('DELETE REQUEST, id is:', backEndID)\n        return axios.delete(API_URL + '/deletePublic', {\n            id: backEndID,\n            user_vk_id: window.user_id,\n            auth_key: window.auth_key\n        })\n    },\n    addGroupToCleanAndGetItData: (publicID) =>\n        axios.post(API_URL + '/addPublic', {\n            user_vk_id: window.user_id,\n            auth_key: window.auth_key,\n            vk_id: publicID\n        }),\n    startCleanTask: (public_ids) =>\n        axios.post('https://hot-dog.site/api/startCleanTasks', {\n            user_vk_id: window.user_id,\n            auth_key: window.auth_key,\n            public_ids: public_ids\n        }),\n    getCleaningTasks: () =>\n        axios.get('https://hot-dog.site/api/getCleanTasks', {\n            params: {\n                user_vk_id: window.user_id,\n                auth_key: window.auth_key\n            }\n        }),\n    getFreshPublic: (public_id) =>\n        axios.get('https://hot-dog.site/api/refreshPublic', {\n            params: {\n                user_vk_id: window.user_id,\n                auth_key: window.auth_key,\n                id: public_id\n            }\n        }),\n    setAccessToken: (token) =>\n        axios.patch('https://hot-dog.site/api/setAccessToken', {\n            access_token: token,\n            user_vk_id: window.user_id,\n            auth_key: window.auth_key\n        }),\n    getPollById: ({ownerID, pollID}) => getPollById({ownerID, pollID}),\n    getAnswersByAnswerID: ({pollID, rightAnswerID}) =>\n        getAnswersByAnswerIdPromise({pollID, rightAnswerID}),\n    getAccessToUserWall: () => VK.callMethod('showSettingsBox', 8192),\n    onSettingChange: () => onSettingChangePromise(),\n    getUserByIDs: ({userIDs}) =>\n        getUserByIDPromise({userIDs}).then(({response}) => {\n            return response\n        }),\n    withdrawBalance: (amount) =>\n        axios.post(API_URL + '/withdrawMoney', {\n            user_vk_id: window.user_id,\n            auth_key: window.auth_key,\n            amount: parseFloat(amount)\n        })\n}\n\nconst getUserByIDPromise = ({userIDs}) => {\n    return new Promise((resolve, reject) => {\n        VK.api(\n            'users.get',\n            {v: '5.92', user_ids: userIDs, fields: 'screen_name'},\n            (data) => {\n                resolve(data)\n            }\n        )\n    })\n}\n\nconst getPollById = ({ownerID, pollID}) => {\n    return new Promise((resolve, reject) => {\n        VK.api('polls.getById', {v: '5.92', poll_id: pollID}, (data) => {\n            if (data.error) {\n                reject(data.error)\n            } else {\n                resolve(data)\n            }\n        })\n    })\n}\n\nfunction getAnswersByAnswerIdPromise({pollID, rightAnswerID}) {\n    return new Promise((resolve, reject) => {\n        VK.api(\n            'polls.getVoters',\n            {\n                v: '5.92',\n                poll_id: pollID,\n                answer_ids: rightAnswerID\n            },\n            (data) => {\n                if (data.error) {\n                    // console.log('ERROR', data.error)\n                    reject(data.error)\n                } else {\n                    resolve(data)\n                }\n            }\n        )\n    })\n}\n\nconst onSettingChangePromise = () => {\n    return new Promise((resolve, reject) => {\n        VK.addCallback('onSettingsChanged', (settings) => {\n            resolve(settings)\n        })\n    })\n}\nconst getGroupsPromise = new Promise((resolve, reject) => {\n    VK.init(\n        () => {\n            VK.api(\n                'groups.get',\n                {\n                    filter: 'moder',\n                    extended: '1',\n                    fields: 'photo_100',\n                    v: '5.85'\n                },\n                (data) => {\n                    const groups = normalizeVKGroupsData(data.response.items)\n                    // const groupsCount = data.response.count\n                    // console.log(`Got ${groupsCount} publics from VK:`)\n                    // console.log(groups)\n                    resolve(groups)\n                }\n            )\n        },\n        () => {\n            // console.log('VK API initialization failed')\n            reject('Groups fetch failed')\n        },\n        '5.85'\n    )\n})\n\nconst normalizeVKGroupsData = (array) => {\n    return array.map(converter)\n}\n\nconst converter = (item) => {\n    // noinspection JSUnresolvedVariable\n    return {\n        avatar_url: item.photo_100,\n        id: item.id,\n        name: item.name\n    }\n}\n","import React from 'react'\nimport swal from 'sweetalert'\nimport './InputModal.css'\n\nconst OAUTH_LINK =\n    'https://oauth.vk.com/authorize?client_id=6726221&redirect_uri=https://oauth.vk.com/blank.html&display=page&response_type=token&v=5.85&scope=groups,wall,offline'\nconst PLACEHOLDER_ACCESS_TOKEN =\n    'https://oauth.vk.com/blank.html#access_token=1383bc6d5df7bf74655b531297c71617b2345687ca&expires_in=0&user_id=159204098'\n\nclass InputModal extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {text: ''}\n    }\n\n    changeText(text) {\n        this.setState({text: text})\n        swal.setActionValue(text)\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"modal__text\">\n                    <p>Нет доступа к управлению вашими сообществами</p>\n                    <p>\n                        Для решения этой проблемы перейдите, по{' '}\n                        <a\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            href={OAUTH_LINK}\n                        >\n                            этой ссылке\n                        </a>\n                        .\n                    </p>\n                    <p>Разрешите доступ нашему приложению</p>\n                    <p>\n                        ВКонтакте покажет страницу, сообщающую, что не стоит\n                        передавать данные из адресной строки\n                    </p>\n                    <p>\n                        Однако, это абсолютно безопасно в случае с нашим\n                        приложением\n                    </p>\n                    <p>Скопируйте целиком URL и вставьте в поле ниже:</p>\n                    <input\n                        type=\"text\"\n                        placeholder={PLACEHOLDER_ACCESS_TOKEN}\n                        value={this.state.text}\n                        onChange={(e) => {\n                            this.changeText(e.target.value)\n                        }}\n                    />\n                    <p>\n                        Это необходимо для получения доступа к удалению\n                        заблокированных пользователей\n                    </p>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport {InputModal}\n","import {API} from '../../services/services.api'\nimport swal from 'sweetalert'\nimport ReactDOM from 'react-dom'\nimport {InputModal} from '../../app/components/CleanPage/InputModal'\nimport React from 'react'\n\nexport const GET_USER_GROUPS = {\n    Load: 'groups/USER_GROUPS_LOAD',\n    Loaded: 'groups/USER_GROUPS_LOADED',\n    Errors: 'groups/USER_GROUPS_ERRORS'\n}\nexport const ADD_GROUP_IN_CLEAN_QUE = {\n    click: 'ADD_GROUP_IN_CLEAN_QUE_CLICK',\n    added: 'ADD_GROUP_IN_CLEAN_QUE_ADD_TO_SERVER'\n}\nexport const GET_DOGS_COUNT = 'GET_DOGS_COUNT '\nexport const DELETE_GROUP_FROM_CLEAN_QUE = 'DELETE_GROUP_FROM_CLEAN_QUE'\nexport const GET_GROUPS_FOR_CLEAN = {\n    Load: 'groups/GET_GROUPS_FOR_CLEAN_LOAD',\n    Loaded: 'groups/GET_GROUPS_FOR_CLEAN_LOADED',\n    Errors: 'groups/GET_GROUPS_FOR_CLEAN_ERRORS'\n}\nexport const CLEAN_GROUP_BY_ID = 'CLEAN_GROUP_BY_ID'\nexport const UPDATE_CLEANING_STATE = 'UPDATE_CLEANING_STATE'\nexport const CLEAN_ALL_GROUPS = 'CLEAN_ALL_GROUPS'\n\nconst initialState = {\n    groups: {\n        data: [],\n        loadingUserGroups: true,\n        loadingCleanTasks: true,\n        errors: []\n    }\n}\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case GET_GROUPS_FOR_CLEAN.Load: {\n            return {\n                ...state,\n                groups: {\n                    ...state.groups,\n                    loadingCleanTasks: true\n                }\n            }\n        }\n        case GET_GROUPS_FOR_CLEAN.Loaded: {\n            const groupsForClean = action.payload\n            groupsForClean.forEach((group) => {\n                group.inCleanQue = true\n                group.isLoadingInfo = false\n                group.cleanData = {\n                    isCleaning: false\n                }\n            })\n            return {\n                ...state,\n                groups: {\n                    ...state.groups,\n                    data: groupsForClean,\n                    loadingCleanTasks: false\n                }\n            }\n        }\n        case UPDATE_CLEANING_STATE: {\n            const cleanTasks = action.payload\n            if (cleanTasks.length === 0) {\n                return state\n            } else {\n                let settedGroups = state.groups.data.map((g) => g)\n                settedGroups.forEach((settedGroup) => {\n                    cleanTasks.forEach((cleanTask) => {\n                        if (settedGroup.backEndID === cleanTask.public_id) {\n                            if (cleanTask.status === 'Завершили') {\n                                settedGroup.cleanData = {\n                                    isCleaning: false\n                                }\n                            } else {\n                                settedGroup.cleanData = {\n                                    isCleaning: true,\n                                    progress: cleanTask.progress,\n                                    status: cleanTask.status\n                                }\n                            }\n                        }\n                    })\n                })\n                return {\n                    ...state,\n                    groups: {\n                        ...state.groups,\n                        data: settedGroups\n                    }\n                }\n            }\n        }\n        case GET_USER_GROUPS.Load: {\n            return {\n                ...state,\n                groups: {\n                    ...state.groups,\n                    loadingUserGroups: true\n                }\n            }\n        }\n        case GET_USER_GROUPS.Loaded: {\n            const userGroups = action.payload\n            const groupsSetted = state.groups.data\n            userGroups.forEach((group) => {\n                group.inCleanQue = false\n                group.isLoadingInfo = true\n            })\n            userGroups.forEach((userGroup) => {\n                groupsSetted.forEach((settedGroup) => {\n                    if (userGroup.id === settedGroup.vk_id) {\n                        userGroup.inCleanQue = settedGroup.inCleanQue\n                        userGroup.backEndID = settedGroup.id\n                        userGroup.dogs = settedGroup.dogs\n                        userGroup.followers = settedGroup.followers\n                        userGroup.cleanData = settedGroup.cleanData\n                    }\n                })\n            })\n            return {\n                ...state,\n                groups: {\n                    data: userGroups,\n                    loadingUserGroups: false\n                }\n            }\n        }\n        case ADD_GROUP_IN_CLEAN_QUE.click:\n            const groupID = action.payload\n            let toggledGroups = state.groups.data.map((group) => {\n                if (group.id === groupID) {\n                    return {\n                        ...group,\n                        inCleanQue: true,\n                        cleanData: {\n                            isCleaning: false\n                        }\n                    }\n                } else {\n                    return group\n                }\n            })\n            return {\n                ...state,\n                groups: {\n                    ...state.groups,\n                    data: toggledGroups\n                }\n            }\n        case ADD_GROUP_IN_CLEAN_QUE.added: {\n            const {groupData, groupID} = action.payload\n            let groupWithData = state.groups.data.map((group) => {\n                if (group.id === groupID) {\n                    return {\n                        ...group,\n                        ...groupData,\n                        dogs: 'Анализ...',\n                        backEndID: groupData.id\n                    }\n                } else {\n                    return group\n                }\n            })\n            return {\n                ...state,\n                groups: {\n                    ...state.groups,\n                    data: groupWithData\n                }\n            }\n        }\n        case GET_DOGS_COUNT: {\n            const {dogsCount, groupID} = action.payload\n            let groupWithDogs = state.groups.data.map((group) => {\n                if (group.vk_id === groupID) {\n                    return {\n                        ...group,\n                        dogs: dogsCount\n                    }\n                } else {\n                    return group\n                }\n            })\n            return {\n                ...state,\n                groups: {\n                    ...state.groups,\n                    data: groupWithDogs\n                }\n            }\n        }\n        case DELETE_GROUP_FROM_CLEAN_QUE: {\n            const groupID = action.payload\n            let toggledGroups = state.groups.data.map((group) => {\n                if (group.id === groupID) {\n                    return {...group, inCleanQue: false}\n                } else {\n                    return group\n                }\n            })\n            return {...state, groups: {...state.groups, data: toggledGroups}}\n        }\n        case CLEAN_GROUP_BY_ID: {\n            let groupID = action.payload\n            let withCleanTask = state.groups.data.map((group) => {\n                if (group.backEndID === groupID) {\n                    return {\n                        ...group,\n                        cleanData: {\n                            isCleaning: true,\n                            progress: 0,\n                            status: 'Отправляем запрос'\n                        }\n                    }\n                } else {\n                    return group\n                }\n            })\n            return {\n                ...state,\n                groups: {\n                    ...state.groups,\n                    data: withCleanTask\n                }\n            }\n        }\n        case CLEAN_ALL_GROUPS: {\n            const allGroupsWithClean = state.groups.data.map((group) => {\n                API.startCleanTask([group.backEndID])\n                return {\n                    ...group,\n                    cleanData: {\n                        isCleaning: true,\n                        progress: 0,\n                        status: 'Отправляем запрос'\n                    }\n                }\n            })\n            return {\n                ...state,\n                groups: {\n                    ...state.groups,\n                    data: allGroupsWithClean\n                }\n            }\n        }\n        default:\n            return state\n    }\n}\n\nexport const cleanAllGroups = (cb, allGroups) => {\n    return (dispatch) => {\n        const groupsIDs = allGroups.map((g) => {\n            return g.backEndID\n        })\n        API.startCleanTask(groupsIDs).then((res) => {\n            let isAnyError\n            if (res.data.error) {\n                isAnyError = res.data.error.id\n            }\n            switch (isAnyError) {\n                case 1:\n                    getAccessTokenFromUser()\n                    break\n                case 2:\n                    showNotEnoughMoneyModal(res.error.value)\n                    break\n                default:\n                    dispatch({\n                        type: CLEAN_ALL_GROUPS\n                    })\n                    let myInterval = setInterval(() => {\n                        API.getCleaningTasks().then((r) => {\n                            const cleanTasks = r.data\n                            dispatch({\n                                type: UPDATE_CLEANING_STATE,\n                                payload: cleanTasks\n                            })\n                            if (cleanTasks.length === 0) {\n                                showCommentAlert(cb)\n                                clearInterval(myInterval)\n                            }\n                        })\n                    }, 500)\n            }\n        })\n    }\n}\n\nexport const AddGroupInCleanQue = (groupID) => {\n    return (dispatch) => {\n        dispatch({\n            type: ADD_GROUP_IN_CLEAN_QUE.click,\n            payload: groupID\n        })\n        API.addGroupToCleanAndGetItData(groupID).then((r) => {\n            const groupData = r.data\n            dispatch({\n                type: ADD_GROUP_IN_CLEAN_QUE.added,\n                payload: {groupData, groupID}\n            })\n            API.getGroupDogsCount(groupData.id).then((r) => {\n                const dogsCount = r.data.dogs_count\n                dispatch({\n                    type: GET_DOGS_COUNT,\n                    payload: {dogsCount, groupID}\n                })\n            })\n        })\n    }\n}\n\nexport const cleanGroupByID = (groupID, cb) => {\n    return (dispatch) => {\n        API.startCleanTask([groupID]).then((res) => {\n            if (res.data.error) {\n                switch (res.data.error.id) {\n                    case 1:\n                        getAccessTokenFromUser()\n                        break\n                    case 2:\n                        showNotEnoughMoneyModal(res.error.value)\n                        break\n                    default:\n                }\n            } else {\n                dispatch({\n                    type: CLEAN_GROUP_BY_ID,\n                    payload: groupID\n                })\n                let myInterval = setInterval(() => {\n                    API.getCleaningTasks().then((r) => {\n                        const cleanTasks = r.data\n                        dispatch({\n                            type: UPDATE_CLEANING_STATE,\n                            payload: cleanTasks\n                        })\n                        if (cleanTasks.length === 0) {\n                            showCommentAlert(cb)\n                            clearInterval(myInterval)\n                        }\n                    })\n                }, 500)\n            }\n        })\n    }\n}\n\nexport const DeleteGroupFromCleanQue = (groupID, backEndID) => {\n    return (dispatch) => {\n        dispatch({\n            type: DELETE_GROUP_FROM_CLEAN_QUE,\n            payload: groupID\n        })\n        API.deleteGroupFromCleanQue(backEndID).then((r) => {})\n    }\n}\n\nexport const GetGroupsForCleanAndUserGroups = () => {\n    return (dispatch) => {\n        startLoading(GET_GROUPS_FOR_CLEAN, dispatch)\n        API.getGroupsForClean().then((r) => {\n            const groupsForClean = r.data\n            dispatch({\n                type: GET_GROUPS_FOR_CLEAN.Loaded,\n                payload: groupsForClean\n            })\n            let myInterval = setInterval(() => {\n                API.getCleaningTasks().then((r) => {\n                    const cleanTasks = r.data\n                    dispatch({\n                        type: UPDATE_CLEANING_STATE,\n                        payload: cleanTasks\n                    })\n                    if (cleanTasks.length === 0) {\n                        clearInterval(myInterval)\n                    }\n                })\n            }, 500)\n            startLoading(GET_USER_GROUPS, dispatch)\n            const groups = API.getUserGroups()\n            groups.then((res) => {\n                dispatch({type: GET_USER_GROUPS.Loaded, payload: res})\n            })\n        })\n    }\n}\n\nconst startLoading = (loadingProperty, dispatch) => {\n    dispatch({\n        type: loadingProperty.Load\n    })\n}\n\nfunction showCommentAlert(cb) {\n    // console.log('Comment alert')\n    const response = swal({\n        title: 'Спасибо!',\n        icon: 'success',\n        text: 'Оставьте, пожалуйста, отзыв о сервисе :)',\n        button: 'Хорошо'\n    })\n    response.then((r) => {\n        // console.log('R IS:', r)\n        if (r === true) {\n            if (cb) {\n                cb()\n            }\n        }\n    })\n}\n\nfunction getAccessTokenFromUser() {\n    let wrapper = window.document.createElement('div')\n    ReactDOM.render(<InputModal />, wrapper)\n    let el = wrapper.firstChild\n    const response = swal({\n        title: 'Упс. Мы не можем очистить ваши сообщества',\n        content: el,\n        buttons: {\n            confirm: {\n                text: 'Сохранить и запустить!',\n                value: ''\n            }\n        }\n    })\n    response.then((r) => {\n        const token = getAccessTokenFromLink(r)\n        API.setAccessToken(token)\n    })\n}\nfunction showNotEnoughMoneyModal(money, cb) {\n    const response = swal({\n        title: 'Упс.. Недостаточно денег',\n        icon: 'error',\n        text: `Для очистки сообществ нужно еще ${money}р.\\nПополните, пожалуйста, баланс`,\n        button: {text: 'Пополнить'}\n    })\n    response.then((r) => {\n        if (r === true) {\n            // console.log('GO TO ADD MONEY')\n        }\n    })\n}\n\nfunction getAccessTokenFromLink(link) {\n    const searchStartStr = '#access_token='\n    const searchEndStr = '&expires_in='\n    return link.slice(\n        link.indexOf(searchStartStr) + searchStartStr.length,\n        link.indexOf(searchEndStr)\n    )\n}\n","import {API} from '../../services/services.api'\nimport swal from 'sweetalert'\nconst delay = require('delay')\n\nconst ON_URL_CHANGE = 'ON_URL_CHANGE'\nconst ON_ANSWER_CHANGE = 'ON_ANSWER_CHANGE'\nconst ADD_SURVEY_FORM = 'ADD_SURVEY_FORM'\nconst GET_WINNERS = 'GET_WINNERS'\nconst END_LOADING_WINNERS = 'END_LOADING_WINNERS'\nconst START_SEARCHING_WINNERS = 'START_SEARCHING_WINNERS'\n\nconst initialState = {\n    surveys: {\n        s1: {\n            s_url: '',\n            s_right_answer: ''\n        }\n    },\n    winners: [],\n    loadingWinners: true\n}\n\nexport default (state = initialState, action) => {\n    const {type, payload} = action\n    switch (type) {\n        case ON_ANSWER_CHANGE: {\n            const {s_key, value} = payload\n            return {\n                ...state,\n                surveys: {\n                    ...state.surveys,\n                    [s_key]: {\n                        ...state.surveys[s_key],\n                        s_right_answer: value\n                    }\n                }\n            }\n        }\n        case ON_URL_CHANGE: {\n            const {s_key, value} = payload\n            return {\n                ...state,\n                surveys: {\n                    ...state.surveys,\n                    [s_key]: {\n                        ...state.surveys[s_key],\n                        s_url: value\n                    }\n                }\n            }\n        }\n        case ADD_SURVEY_FORM: {\n            let surveysLength = Object.keys(state.surveys).length\n            const surveyID = 's' + surveysLength + 1\n            return {\n                ...state,\n                surveys: {\n                    ...state.surveys,\n                    [surveyID]: {s_url: '', s_right_answer: ''}\n                }\n            }\n        }\n        case GET_WINNERS: {\n            const filterWinners = (oldArray, newArray) => {\n                if (oldArray.length === 0) {\n                    return newArray\n                }\n                let newArr = []\n                newArray.forEach((newItem) => {\n                    oldArray.forEach((oldItem) => {\n                        // console.log(newItem, oldItem)\n                        if (newItem.id === oldItem.id) {\n                            newArr = [...newArr, newItem]\n                        }\n                    })\n                })\n                return newArr\n            }\n            const oldArray = state.winners\n            const newArray = payload\n            const newState = filterWinners(oldArray, newArray)\n            // console.log('UNIQUE USERS:', newState)\n            return {\n                ...state,\n                winners: newState,\n                loadingWinners: true\n            }\n        }\n        case END_LOADING_WINNERS: {\n            return {\n                ...state,\n                loadingWinners: false\n            }\n        }\n        case START_SEARCHING_WINNERS: {\n            return {\n                ...state,\n                winners: [],\n                loadingWinners: true\n            }\n        }\n        default:\n            return state\n    }\n}\n\nfunction getRightAnswerID({poll, s_right_answer}) {\n    const rightAnswer = poll.answers[s_right_answer - 1]\n    return rightAnswer.id\n}\n\nfunction getUsersThatResponseRight({pollID, rightAnswerID}) {\n    return API.getAnswersByAnswerID({pollID, rightAnswerID}).then(\n        ({response}) => {\n            const rightUsers = response[0].users.items\n            return rightUsers\n        }\n    )\n}\n\nexport const GetPollById = ({ownerID, pollID, s_key, s_right_answer}) => {\n    ownerID = parseInt(ownerID)\n    pollID = parseInt(pollID)\n    return API.getPollById({ownerID, pollID})\n        .then(({response}) => {\n            return response\n        })\n        .catch((err) => {\n            API.getAccessToUserWall()\n            return API.onSettingChange().then((r) => {\n                return API.getPollById({ownerID, pollID}).then(({response}) => {\n                    return response\n                })\n            })\n        })\n}\n\nexport const onUrlChange = (e, s_key) => {\n    return (dispatch) => {\n        const value = e.target.value\n        dispatch({\n            type: ON_URL_CHANGE,\n            payload: {value, s_key}\n        })\n    }\n}\n\nexport const onAnswerChange = (e, s_key) => {\n    return (dispatch) => {\n        const value = e.target.value\n        dispatch({\n            type: ON_ANSWER_CHANGE,\n            payload: {value, s_key}\n        })\n    }\n}\n\nexport const addSurveyForm = () => {\n    return (dispatch) => {\n        dispatch({\n            type: ADD_SURVEY_FORM\n        })\n    }\n}\n\nfunction getPollID(s_url) {\n    const ownerAndPollID = s_url.split('poll-')[1]\n    return ownerAndPollID.split('_')[1]\n}\n\nfunction getPollOwnerID(s_url) {\n    const ownerAndPollID = s_url.split('poll-')[1]\n    return ownerAndPollID.split('_')[0]\n}\n\nconst MINIMAL_BALANCE_FOR_SURVEY = 100\n\nexport const GetWinners = (surveys, balance, cb, updateBalance) => {\n    return async (dispatch) => {\n        if (balance < MINIMAL_BALANCE_FOR_SURVEY) {\n            showNotEnoughMoney(cb)\n        } else {\n            API.withdrawBalance(100).then(async (r) => {\n                console.log('RESPONSE BALANCE:', r.data)\n                if (r.data.error) {\n                    console.log('ERROR:')\n                    showNotEnoughMoney(cb)\n                } else {\n                    dispatch({\n                        type: START_SEARCHING_WINNERS\n                    })\n                    const s_keys = Object.keys(surveys).map((s_key) => s_key)\n                    for (let i = 0; i < s_keys.length; i++) {\n                        const s_key = s_keys[i]\n                        const surveyData = surveys[s_key]\n                        const pollID = getPollID(surveyData.s_url)\n                        const ownerID = getPollOwnerID(surveyData.s_url)\n                        const s_right_answer = surveys[s_key].s_right_answer\n                        GetPollById({\n                            ownerID,\n                            pollID,\n                            s_key,\n                            s_right_answer\n                        }).then((poll) => {\n                            const rightAnswerID = getRightAnswerID({\n                                poll,\n                                s_right_answer\n                            })\n                            getUsersThatResponseRight({\n                                pollID,\n                                rightAnswerID\n                            }).then((rightUsers) => {\n                                // console.log('RIGHT USERS:', rightUsers)\n                                let userIDs = rightUsers.join()\n                                API.getUserByIDs({userIDs}).then(\n                                    (usersInfo) => {\n                                        // console.log('USERS INFO:', usersInfo)\n                                        dispatch({\n                                            type: GET_WINNERS,\n                                            payload: usersInfo\n                                        })\n                                        if (i === s_keys.length - 1) {\n                                            updateBalance()\n                                            dispatch({\n                                                type: END_LOADING_WINNERS\n                                            })\n                                        }\n                                    }\n                                )\n                            })\n                        })\n                        await delay(400)\n                    }\n                }\n            })\n        }\n    }\n}\n\nfunction showNotEnoughMoney(cb) {\n    const response = swal({\n        title: 'Упс',\n        text: 'Чтобы продолжить, перейдите, чтобы пополните ваш баланс',\n        button: 'Перейти'\n    })\n    response.then((r) => {\n        if (r) {\n            if (cb) {\n                cb()\n            }\n        }\n    })\n}\n","import {combineReducers} from 'redux'\nimport clean from './reducer.clean'\nimport surveys from './reducer.survey'\nexport default combineReducers({\n    clean,\n    surveys\n})\n","import {createStore, applyMiddleware, compose} from 'redux'\nimport logger from 'redux-logger'\nimport thunk from 'redux-thunk'\nimport {createBrowserHistory} from 'history'\nimport rootReducer from './reducers/reducer.root'\n\nexport const history = createBrowserHistory()\n\nconst middleware = [thunk]\nconst devToolsExtension = window.devToolsExtension\nconst enhancers = []\n\nif (typeof devToolsExtension === 'function') {\n    enhancers.push(devToolsExtension())\n}\n\nconst composedEnhancers = compose(\n    applyMiddleware(...middleware),\n    ...enhancers\n)\n\nconst initialState = {}\n\nconst store = createStore(rootReducer, initialState, composedEnhancers)\n\nexport default store\n","import React, {Component} from 'react'\nimport {PublicInfo} from './PublicInfo'\nimport {ProgressBar} from './ProgressBar'\nimport {PublicAvatar} from './PublicAvatar'\nimport './Public.css'\nimport PropTypes from 'prop-types'\nimport {bindActionCreators} from 'redux'\nimport {connect} from 'react-redux'\nimport {cleanGroupByID} from '../../../../store/reducers/reducer.clean'\nimport {history} from '../../../../store'\n\nclass Public extends Component {\n    static propTypes = {\n        id: PropTypes.number.isRequired,\n        vk_id: PropTypes.number.isRequired,\n        name: PropTypes.string.isRequired,\n        avatar_url: PropTypes.string.isRequired,\n        followers: PropTypes.number.isRequired,\n        dogs: PropTypes.oneOf(PropTypes.number, PropTypes.string).isRequired,\n        cleanData: PropTypes.shape({\n            isCleaning: PropTypes.bool.isRequired,\n            progress: PropTypes.number,\n            status: PropTypes.string\n        }).isRequired,\n        onClean: PropTypes.func.isRequired\n    }\n\n    render() {\n        const {backEndID, cleanGroupByID} = this.props;\n        return (\n            <div className=\"public-wrapper\">\n                <div className=\"public\">\n                    <div className=\"public__heading\">\n                        <PublicAvatar url={this.props.avatar_url} />\n                        <div className=\"public__heading__name\">\n                            {this.props.name}\n                        </div>\n                    </div>\n                    <div className=\"public__info\">\n                        {this.props.cleanData.isCleaning ? (\n                            <ProgressBar\n                                progress={this.props.cleanData.progress}\n                                status={this.props.cleanData.status}\n                            />\n                        ) : (\n                            <PublicInfo\n                                peopleCount={this.props.followers}\n                                deletedPeople={this.props.dogs}\n                                onStartClean={() => {\n                                    cleanGroupByID(backEndID, () => {history.push(\"/feedback\")})\n                                }}\n                            />\n                        )}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\n\nconst mapDispatchToProps = dispatch => bindActionCreators({cleanGroupByID}, dispatch)\n\nexport default connect(null, mapDispatchToProps)(Public);\n","import React, {Component} from 'react'\nimport * as PropTypes from 'prop-types'\n\nexport class AddPublicButton extends Component {\n    render() {\n        return <div\n            className=\"btn btn__add\"\n            onClick={this.props.onClick}\n        >\n            Добавить Сообщество\n        </div>\n    }\n}\n\nAddPublicButton.propTypes = {onClick: PropTypes.func}","import React from 'react'\n\nexport function VideoGuide() {\n    return (\n        <iframe\n            title={\"video guide\"}\n            src=\"//vk.com/video_ext.php?oid=-171466987&id=456239020&hash=2a4b21d6648495d0&hd=1\"\n            width=\"426\"\n            height=\"210\"\n            frameBorder=\"0\"\n            allowFullScreen\n        />\n    )\n}","import React, {Component} from 'react'\nimport {bindActionCreators} from 'redux'\nimport {connect} from 'react-redux'\nimport {\n    AddGroupInCleanQue,\n    DeleteGroupFromCleanQue\n} from '../../../../../store/reducers/reducer.clean'\n\nclass Group extends Component {\n    render() {\n        const {group, AddGroupInCleanQue, DeleteGroupFromCleanQue} = this.props\n        return (\n            <div className=\"group\">\n                <div className=\"group__details\">\n                    <img src={group.avatar_url} alt=\"avatar\" />\n                    <span className=\"ellipsis\">{group.name}</span>\n                </div>\n                <span\n                    className={`plus-sign ${\n                        group.inCleanQue ? 'plus-sign--cris' : ''\n                    }`}\n                    onClick={() => {\n                        if (group.inCleanQue) {\n                            // console.log('Group for deleting', group)\n                            DeleteGroupFromCleanQue(group.id, group.backEndID)\n                        } else {\n                            AddGroupInCleanQue(group.id)\n                        }\n                    }}\n                />\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({})\n\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators(\n        {\n            AddGroupInCleanQue,\n            DeleteGroupFromCleanQue\n        },\n        dispatch\n    )\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Group)\n","import React, {Component} from 'react'\nimport './modal.scss'\nimport Group from './Group'\n\nclass GroupsModal extends Component {\n    componentDidMount() {\n        const html = document.querySelector(\"html\");\n        const height = html.scrollHeight;\n        document.querySelector('.modal__bg').style.height = `${height}px`\n    }\n\n    render() {\n        const {groups, close} = this.props\n        return (\n            <div className=\"modal\">\n                <div className=\"modal__bg\" onClick={close} />\n                <div className=\"modal__body\">\n                    <div className=\"modal__body__text\">Выберите сообщество</div>\n                    <div className=\"modal__body__content\">\n                        {groups.map((group) => {\n                            return <Group group={group} />\n                        })}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default GroupsModal\n","import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport PanelControl from './PanelControl/PanelControl'\nimport Public from './PublicGroup/Public'\nimport {bindActionCreators} from 'redux'\nimport {AddPublicButton} from './PublicGroup/AddPublicButton'\nimport swal from 'sweetalert'\nimport axios from 'axios'\nimport {\n    GetGroupsForCleanAndUserGroups,\n    cleanGroupByID,\n    cleanAllGroups\n} from '../../../store/reducers/reducer.clean'\nimport ReactDOM from 'react-dom'\nimport {InputModal} from './InputModal'\nimport {VideoGuide} from './VideoGuide'\nimport {Redirect} from 'react-router-dom'\nimport GroupsModal from './PublicGroup/GroupsModal/GroupsModal'\nimport {history} from '../../../store'\n\nconst CLEAN_TASK_ERRORS = ['Возникла ошибка', 'Завершили'] // errors? finished != error\n\nclass CleanPage extends Component {\n    state = {\n        publics: [],\n        redirect: false,\n        isAddGroupOpen: false\n    }\n\n    componentWillMount() {\n        const {GetGroupsForCleanAndUserGroups} = this.props\n        GetGroupsForCleanAndUserGroups()\n    }\n\n    renderGroups = (groups) => {\n        if (!groups.length) return null\n        return groups.map(\n            (group) => group.inCleanQue && <Public {...group} key={group.id} />\n        )\n    }\n\n    async startCleanPublicById(publicID) {\n        const {setCleaningStateOnGroupByID} = this.props\n        const response = await this.startCleanTasks([publicID])\n        if ('error' in response) {\n            if (response.error.id === 1) {\n                const accessToken = await this.getAccessTokenFromUser()\n                await this.setAccessToken(accessToken)\n                return await this.onStartClean()\n            } else if (response.error.id === 2) {\n                await this.showNotEnoughMoneyModal(response.error.value)\n            }\n        } else {\n            setCleaningStateOnGroupByID(publicID)\n            // this.setGroups(publics)\n            this.timerId = setInterval(async () => {\n                await this.updateCleanTasks()\n                // console.log(this)\n                await this.props.updateBalance()\n            }, 1500)\n        }\n    }\n\n    async onStartClean() {\n        const public_ids = this.getPublicIds()\n        const response = await this.startCleanTasks(public_ids)\n        if ('error' in response) {\n            if (response.error.id === 1) {\n                const accessToken = await this.getAccessTokenFromUser()\n                await this.setAccessToken(accessToken)\n                return await this.onStartClean()\n            } else if (response.error.id === 2) {\n                await this.showNotEnoughMoneyModal(response.error.value)\n            }\n        } else {\n            const publics = this.setCleaningStateOnPublics()\n            this.setGroups(publics)\n            this.timerId = setInterval(async () => {\n                await this.updateCleanTasks()\n                await this.props.updateBalance()\n            }, 1500)\n        }\n    }\n\n    async startCleanTasks(public_ids) {\n        return (await axios.post('https://hot-dog.site/api/startCleanTasks', {\n            user_vk_id: window.user_id,\n            auth_key: window.auth_key,\n            public_ids: public_ids\n        })).data\n    }\n\n    cleanTaskIsFinished(cleanTask) {\n        return CLEAN_TASK_ERRORS.includes(cleanTask.status)\n    }\n\n    getPublicIds() {\n        return this.state.publics.map((item) => item.id)\n    }\n\n    async getAccessTokenFromUser() {\n        let wrapper = window.document.createElement('div')\n        ReactDOM.render(<InputModal />, wrapper)\n        let el = wrapper.firstChild\n        const response = await swal({\n            title: 'Упс. Мы не можем очистить ваши сообщества',\n            content: el,\n            buttons: {\n                confirm: {\n                    text: 'Сохранить и запустить!',\n                    value: ''\n                }\n            }\n        })\n        return this.getAccessTokenFromLink(response)\n    }\n\n    async setAccessToken(token) {\n        return await axios.patch('https://hot-dog.site/api/setAccessToken', {\n            access_token: token,\n            user_vk_id: window.user_id,\n            auth_key: window.auth_key\n        })\n    }\n\n    async getCleanTasks() {\n        return (await axios.get('https://hot-dog.site/api/getCleanTasks', {\n            params: {\n                user_vk_id: window.user_id,\n                auth_key: window.auth_key\n            }\n        })).data\n    }\n\n    async updateCleanTasks() {\n        const cleanTasks = await this.getCleanTasks()\n        if (!(cleanTasks && cleanTasks.length)) {\n            clearInterval(this.timerId)\n            for (const publik of this.state.publics) {\n                await this.refreshPublicById(publik.id)\n            }\n            await this.showCommentAlert()\n            return\n        }\n        const publics = this.addCleanTaskToGroups(\n            this.state.publics,\n            cleanTasks\n        )\n        this.setGroups(publics)\n    }\n\n    async refreshPublicById(publicId) {\n        const freshPublic = await this.getFreshPublic(publicId)\n        freshPublic.cleanData = {\n            isCleaning: false\n        }\n        freshPublic.onClean = async () => {\n            await this.startCleanPublicById(freshPublic.id)\n        }\n        const {publics} = this.state\n        const freshPublicIndex = publics.findIndex(\n            (item) => item.id === publicId\n        )\n        publics[freshPublicIndex] = freshPublic\n        this.setGroups(publics)\n    }\n\n    async getFreshPublic(public_id) {\n        return (await axios.get('https://hot-dog.site/api/refreshPublic', {\n            params: {\n                user_vk_id: window.user_id,\n                auth_key: window.auth_key,\n                id: public_id\n            }\n        })).data\n    }\n\n    getAccessTokenFromLink(link) {\n        const searchStartStr = '#access_token='\n        const searchEndStr = '&expires_in='\n        return link.slice(\n            link.indexOf(searchStartStr) + searchStartStr.length,\n            link.indexOf(searchEndStr)\n        )\n    }\n\n    getPublicById(publics, public_id) {\n        return publics.find((item) => item.id === public_id)\n    }\n\n    async showNotEnoughMoneyModal(money) {\n        const response = await swal({\n            title: 'Упс.. Недостаточно денег',\n            icon: 'error',\n            text: `Для очистки сообществ нужно еще ${money}р.\\nПополните, пожалуйста, баланс`,\n            button: {text: 'Пополнить'}\n        })\n        if (response) this.setState({redirect: '/add_money'})\n    }\n\n    async showCommentAlert() {\n        const response = await swal({\n            title: 'Спасибо!',\n            icon: 'success',\n            text: 'Оставьте, пожалуйста, отзыв о сервисе :)',\n            button: 'Хорошо'\n        })\n        if (response) this.setState({redirect: '/feedback'})\n    }\n\n    toggleModal = () => {\n        this.setState({\n            isAddGroupOpen: !this.state.isAddGroupOpen\n        })\n    }\n\n    render() {\n        const {isAddGroupOpen} = this.state\n        const {groups, cleanAllGroups} = this.props\n\n        return (\n            <div className=\"clean\">\n                <PanelControl\n                    onCleanClick={() =>\n                        cleanAllGroups(() => {\n                            history.push('/feedback')\n                        }, groups)\n                    }\n                />\n\n                <div className=\"publics\">\n                    {groups && this.renderGroups(groups)}\n                </div>\n\n                <AddPublicButton onClick={this.toggleModal} />\n\n                {isAddGroupOpen && (\n                    <GroupsModal close={this.toggleModal} groups={groups} />\n                )}\n\n                <VideoGuide />\n\n                {this.state.redirect && (\n                    <Redirect to={this.state.redirect} push />\n                )}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = ({clean}) => ({\n    groups: clean.groups.data,\n    cleanTasks: clean.cleanTasks\n})\n\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators(\n        {\n            GetGroupsForCleanAndUserGroups,\n            setCleaningStateOnGroupByID: cleanGroupByID,\n            cleanAllGroups\n        },\n        dispatch\n    )\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(CleanPage)\n","import React, {Component} from 'react'\nimport {NavLink} from 'react-router-dom'\nimport '../fonts/fontello/fontello.css'\n\nclass TopBar extends Component {\n    render() {\n        return (\n            <header className=\"nav\">\n                <div className=\"nav__info\">\n                    <nav>\n                        <NavLink className={'nav__item'} to={'/feedback'}>\n                            Отзывы\n                        </NavLink>\n                        <NavLink className={'nav__item'} to={'/add_money'}>\n                            Пополнить баланс\n                        </NavLink>\n                    </nav>\n                    <div>\n                        <span className=\"balance\">\n                            <i className=\"icon-rouble\" />\n                            {this.props.balance}р\n                        </span>\n                    </div>\n                </div>\n                <div className=\"nav__actions\">\n                    <nav>\n                        <NavLink className=\"nav__item\" to=\"/clean\">\n                            Очистка\n                        </NavLink>\n                        <NavLink className={'nav__item'} to={'/survey'}>\n                            Опросы\n                        </NavLink>\n                    </nav>\n                </div>\n            </header>\n        )\n    }\n}\n\nexport default TopBar\n","import React from 'react'\nimport './money-page.scss'\n\nclass AddMoneyPage extends React.Component {\n    componentWillMount() {\n        this.timerId = window.setInterval(() => {\n            this.props.updateBalance()\n        }, 1000)\n    }\n\n    componentWillUnmount() {\n        window.clearInterval(this.timerId)\n    }\n\n    render() {\n        return (\n            <div className=\"add-money-page\">\n                <div className=\"text\">\n                    <p>Пополните баланс для очистки сообщества:</p>\n                    <div className=\"underline\" />\n                </div>\n                <form\n                    action=\"https://money.yandex.ru/quickpay/confirm.xml\"\n                    method=\"post\"\n                    target=\"_blank\"\n                >\n                    <input\n                        type=\"hidden\"\n                        name=\"receiver\"\n                        value=\"410011043655449\"\n                    />\n                    <input type=\"hidden\" name=\"quickpay-form\" value=\"shop\" />\n                    <input type=\"hidden\" name=\"targets\" value=\"Hot Dog\" />\n\n                    <div className=\"money-input-wrapper\">\n                        <p>\n                            <label htmlFor=\"money-input\">Сумма:</label>\n                        </p>\n                        <input\n                            type=\"text\"\n                            name=\"sum\"\n                            placeholder=\"100 руб\"\n                            id=\"money-input\"\n                            className=\"money-input\"\n                            autoComplete=\"false\"\n                        />\n                        <p>Комиссия — 0%</p>\n                    </div>\n                    <div className=\"payment-type-wrapper\">\n                        <p>Способ оплаты:</p>\n                        <label>\n                            <input type=\"radio\" name=\"paymentType\" value=\"PC\" />\n                            Яндекс.Деньгами\n                        </label>\n                        <label>\n                            <input type=\"radio\" name=\"paymentType\" value=\"AC\" />\n                            Банковской картой\n                        </label>\n                    </div>\n                    <input\n                        type=\"hidden\"\n                        name=\"formcomment\"\n                        value=\"hot dog: пополнение баланса\"\n                    />\n                    <input\n                        type=\"hidden\"\n                        name=\"short-dest\"\n                        value=\"hot dog: пополнение баланса\"\n                    />\n                    <input\n                        type=\"hidden\"\n                        name=\"label\"\n                        value={`hot-dog: ${window.user_id}`}\n                    />\n                    <input\n                        type=\"hidden\"\n                        name=\"successURL\"\n                        value=\"https://vk.com/app6731681_-171466987\"\n                    />\n                    <button type=\"submit\" className=\"submit-button\">\n                        Пополнить\n                    </button>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default AddMoneyPage\n","import React from 'react'\nimport './FeedbackPage.css'\n\nclass FeedbackPage extends React.Component {\n    componentWillMount() {\n        /*global VK*/\n        // noinspection JSUnresolvedVariable, JSUnresolvedFunction\n        VK.Widgets.Comments('vk_comments', {\n            limit: 10,\n            attach: '*',\n            height: 800\n        })\n    }\n    render() {\n        return (\n            <div>\n                <div id=\"vk_comments\" className=\"vk-comments\" />\n            </div>\n        )\n    }\n}\n\nexport default FeedbackPage\n","import React, {Component} from 'react'\nimport './survey-form.scss'\n\nclass SurveyAddForm extends Component {\n    render() {\n        const {\n            i,\n            s_url,\n            s_right_answer,\n            onUrlChange,\n            onAnswerChange,\n            s_key\n        } = this.props\n        return (\n            <div className=\"survey-form\">\n                <div className=\"survey__instance\">\n                    <div className=\"survey__num\">Опрос №{i + 1}</div>\n                    <div className=\"survey-input\">\n                        <div className=\"input-place\">\n                            <label htmlFor=\"survey-link\">Ссылка на опрос</label>\n                            <input\n                                type=\"text\"\n                                id=\"survey-link\"\n                                value={s_url}\n                                placeholder=\"https://vk.com/club174166508?w=poll-174166508_313436729\"\n                                onChange={(e) => onUrlChange(e, s_key)}\n                            />\n                        </div>\n                        <div className=\"input-place\">\n                            <label htmlFor=\"right-num\">Ответ (№)</label>\n                            <input\n                                type=\"number\"\n                                id=\"right-num\"\n                                value={s_right_answer}\n                                onChange={(e) => onAnswerChange(e, s_key)}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default SurveyAddForm\n","import React, {Component} from 'react'\nimport SurveyAddForm from './SurveyAddForm/SurveyAddForm'\nimport connect from 'react-redux/src/connect/connect'\nimport {bindActionCreators} from 'redux'\nimport {\n    addSurveyForm,\n    GetWinners,\n    onAnswerChange,\n    onUrlChange\n} from '../../../store/reducers/reducer.survey'\nimport {history} from '../../../store'\n\nconsole.log('AAF')\n\nclass SurveyPage extends Component {\n    render() {\n        const {\n            surveys,\n            winners,\n            loadingWinners,\n            balance,\n            updateBalance,\n            onAnswerChange,\n            onUrlChange,\n            addSurveyForm,\n            GetWinners\n        } = this.props\n        return (\n            <div className=\"survey-wrapper\">\n                <div className=\"surveys-form-wrapper\">\n                    {Object.keys(surveys).map((s_key, i) => {\n                        const s_url = surveys[s_key].s_url\n                        const s_right_answer = surveys[s_key].s_right_answer\n\n                        return (\n                            <SurveyAddForm\n                                key={i}\n                                i={i}\n                                s_url={s_url}\n                                s_right_answer={s_right_answer}\n                                s_key={s_key}\n                                onAnswerChange={onAnswerChange}\n                                onUrlChange={onUrlChange}\n                            />\n                        )\n                    })}\n                </div>\n\n                {!loadingWinners && (\n                    <div className=\"winners-list\">\n                        {!loadingWinners &&\n                            winners.map((winner) => {\n                                const {\n                                    screen_name,\n                                    first_name,\n                                    last_name\n                                } = winner\n                                return (\n                                    <div className=\"winners-list__item\">\n                                        {`@${screen_name} (${first_name} ${last_name})`}\n                                    </div>\n                                )\n                            })}\n                    </div>\n                )}\n\n                {\n                    <div className=\"btns-holder\">\n                        <div className=\"btn-ff\" onClick={addSurveyForm}>\n                            Добавить опрос\n                        </div>\n                        <div\n                            className=\"btn-ff\"\n                            onClick={() => {\n                                GetWinners(\n                                    surveys,\n                                    balance,\n                                    () => {\n                                        history.push('/add_money')\n                                    },\n                                    updateBalance\n                                )\n                            }}\n                        >\n                            Узнать победителей\n                        </div>\n                    </div>\n                }\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = ({surveys}) => ({\n    surveys: surveys.surveys,\n    winners: surveys.winners,\n    loadingWinners: surveys.loadingWinners\n})\n\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators(\n        {onAnswerChange, onUrlChange, addSurveyForm, GetWinners},\n        dispatch\n    )\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(SurveyPage)\n","import React, {Component, Fragment} from 'react'\nimport {Route, Router, Switch} from 'react-router-dom'\nimport CleanPage from './components/CleanPage/CleanPage'\nimport * as Sentry from '@sentry/browser'\nimport TopBar from './components/TopBar'\nimport AddMoneyPage from './components/AddMoneyPage/AddMoneyPage'\nimport axios from 'axios'\nimport FeedbackPage from './components/FeedbackPage/FeedbackPage'\nimport {history} from '../store'\nimport SurveyPage from './components/SurveyPage/SurveyPage'\n\nif (process.env.NODE_ENV === 'production') {\n    // noinspection JSUnresolvedVariable\n    Sentry.init({\n        dsn: process.env.REACT_APP_SENTRY_DSN\n    })\n}\n\nclass App extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {}\n    }\n\n    setBalance = (newBalance) => {\n        this.setState({balance: newBalance})\n    }\n\n    async componentWillMount() {\n        window.user_id = getQueryParam('viewer_id')\n        window.auth_key = getQueryParam('auth_key')\n        history.push('/')\n        await this.updateBalance()\n    }\n\n    getUserBalance = async () => {\n        return (await axios.get('https://hot-dog.site/api/getBalance', {\n            params: {\n                user_vk_id: window.user_id,\n                auth_key: window.auth_key\n            }\n        })).data.balance\n    }\n\n    componentDidCatch(error, errorInfo) {\n        this.setState({error})\n        Sentry.withScope((scope) => {\n            Object.keys(errorInfo).forEach((key) => {\n                scope.setExtra(key, errorInfo[key])\n            })\n            Sentry.captureException(error)\n        })\n    }\n\n    updateBalance = async () => {\n        this.setBalance(await this.getUserBalance())\n    }\n\n    render() {\n        return (\n            <Router basename={process.env.PUBLIC_URL} history={history}>\n                <Fragment>\n                    <TopBar balance={this.state.balance} />\n                    <Switch>\n                        <Route\n                            exact\n                            path=\"/\"\n                            render={() => (\n                                <CleanPage\n                                    balance={this.state.balance}\n                                    updateBalance={this.updateBalance.bind(\n                                        this\n                                    )}\n                                />\n                            )}\n                        />\n                        <Route path=\"/clean\" component={CleanPage} />\n                        <Route\n                            path=\"/survey\"\n                            component={() => (\n                                <SurveyPage\n                                    balance={this.state.balance}\n                                    updateBalance={this.updateBalance}\n                                />\n                            )}\n                        />\n                        <Route\n                            path={'/add_money'}\n                            render={() => (\n                                <AddMoneyPage\n                                    updateBalance={this.updateBalance.bind(\n                                        this\n                                    )}\n                                />\n                            )}\n                        />\n                        <Route path={'/feedback'} component={FeedbackPage} />\n                        <Route\n                            path={'/getToken'}\n                            component={() => <div>ACCESS TOKEN MAN</div>}\n                        />\n                    </Switch>\n                </Fragment>\n            </Router>\n        )\n    }\n}\n\nfunction getQueryParam(param) {\n    const query = window.location.search.substring(1)\n    window.urlParams = query\n    const vars = query.split('&')\n    for (let i = 0; i < vars.length; i++) {\n        const pair = vars[i].split('=')\n        if (pair[0] === param) {\n            return pair[1]\n        }\n    }\n    throw new Error(`Query Variable ${param} not found`)\n}\n\nexport default App\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {Provider} from 'react-redux'\nimport App from './app/App'\nimport './static/styles/index.scss'\nimport * as serviceWorker from './serviceWorker'\nimport store from './store/index'\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}